<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
    <title>Formulário de Inscrição · Emendas Parlamentares</title>
    <!-- Google Fonts e Font Awesome -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ===== RESET & VARIÁVEIS ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(145deg, #f6f9fc 0%, #edf2f9 100%);
            color: #1e293b;
            line-height: 1.5;
            padding: 2rem 1.5rem;
            min-height: 100vh;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
        }

        /* ===== FORMULÁRIO PRINCIPAL ===== */
        .form-wrapper {
            background: white;
            border-radius: 36px;
            padding: 2.2rem 2rem;
            box-shadow: 0 25px 50px -8px rgba(0,40,80,0.15);
            border: 1px solid rgba(255,255,255,0.6);
            backdrop-filter: blur(4px);
        }

        h1 {
            font-size: 1.9rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 0.2rem;
            color: #0e4b66;
        }

        h1 i {
            color: #1f7a8c;
            font-size: 2rem;
        }

        .subhead {
            color: #3f6b7a;
            font-size: 0.95rem;
            margin-bottom: 2rem;
            padding-bottom: 0.7rem;
            border-bottom: 2px dashed #bdd3df;
        }

        .grid-form {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.8rem 2rem;
        }

        .full-width {
            grid-column: span 2;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            font-size: 0.8rem;
            letter-spacing: 0.4px;
            text-transform: uppercase;
            color: #1e5262;
            margin-bottom: 0.4rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .form-group label i {
            color: #278098;
            width: 18px;
        }

        .form-control {
            border: 1.5px solid #e2ecf0;
            border-radius: 16px;
            padding: 0.85rem 1.2rem;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.15s;
            background: #fafdfe;
        }

        .form-control:focus {
            border-color: #1f9ab3;
            background: white;
            box-shadow: 0 0 0 4px rgba(31,154,179,0.1);
            outline: none;
        }

        .valor-input {
            position: relative;
        }

        .valor-input span {
            position: absolute;
            left: 14px;
            top: 12px;
            font-weight: 700;
            color: #0a5c6e;
        }

        .valor-input input {
            padding-left: 40px;
        }

        /* ===== BOTÃO ===== */
        .btn-submit {
            background: linear-gradient(145deg, #0d5e70, #0a4a5c);
            border: none;
            border-radius: 40px;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(255,255,255,0.3);
            margin-top: 0.8rem;
            box-shadow: 0 8px 20px rgba(8,80,100,0.3);
            width: 100%;
        }

        .btn-submit:hover {
            background: linear-gradient(145deg, #0e6f84, #0c596b);
            transform: scale(1.01);
            box-shadow: 0 12px 28px rgba(8,100,120,0.4);
        }

        .btn-submit i {
            font-size: 1.2rem;
        }

        /* ===== RESPONSIVO ===== */
        @media (max-width: 750px) {
            .grid-form {
                grid-template-columns: 1fr;
            }
            .full-width {
                grid-column: span 1;
            }
            body { padding: 1rem; }
        }

        /* ===== MENSAGEM FLUTUANTE ===== */
        .toast-message {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #1e3e4a;
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 500;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 999;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ===== FORMULÁRIO ===== -->
        <div class="form-wrapper">
            <h1>
                <i class="fas fa-pen-fancy"></i> Registro de Emenda Parlamentar
            </h1>
            <div class="subhead">
                <i class="fas fa-info-circle"></i> Preencha os dados conforme documentação oficial. Campos com * são essenciais.
            </div>

            <form id="emendaForm">
                <div class="grid-form">
                    <!-- DATA E HORA -->
                    <div class="form-group">
                        <label><i class="far fa-calendar-check"></i> Data e hora *</label>
                        <input type="text" class="form-control" id="dataHora" name="dataHora" placeholder="dd/mm/aaaa  hh:mm:ss" required>
                    </div>
                    <!-- PROC. ADM. -->
                    <div class="form-group">
                        <label><i class="fas fa-hashtag"></i> PROC. ADM.</label>
                        <input type="text" class="form-control" id="procAdm" name="procAdm" placeholder="00000/0000-00">
                    </div>
                    <!-- PROC. ADM. CÂMARA -->
                    <div class="form-group">
                        <label><i class="fas fa-gavel"></i> PROC. ADM. CÂMARA</label>
                        <input type="text" class="form-control" id="procCamara" name="procCamara" placeholder="00000/0000">
                    </div>
                    <!-- EMENDA PARLAMENTAR -->
                    <div class="form-group">
                        <label><i class="fas fa-landmark"></i> EMENDA PARLAMENTAR</label>
                        <input type="text" class="form-control" id="emenda" name="emenda" placeholder="000/0000">
                    </div>
                    <!-- VALOR -->
                    <div class="form-group valor-input">
                        <label><i class="fas fa-coins"></i> VALOR (R$) *</label>                        
                        <input type="text" class="form-control" id="valor" name="valor" placeholder="0.000,00" style="padding-left: 40px;" required>
                    </div>
                    <!-- RESPONSÁVEL -->
                    <div class="form-group">
                        <label><i class="fas fa-user-tie"></i> Responsável *</label>
                        <input type="text" class="form-control" id="responsavel" name="responsavel" placeholder="Nome completo" required>
                    </div>
                    <!-- ENTIDADE (full width) -->
                    <div class="form-group full-width">
                        <label><i class="fas fa-users"></i> ENTIDADE *</label>
                        <input type="text" class="form-control" id="entidade" name="entidade" placeholder="Nome da associação / entidade" required>
                    </div>
                    <!-- DESCRIÇÃO (full width) -->
                    <div class="form-group full-width">
                        <label><i class="fas fa-align-left"></i> DESCRIÇÃO *</label>
                        <textarea class="form-control" id="descricao" name="descricao" rows="2" placeholder="Detalhamento da destinação da verba" required></textarea>
                    </div>
                    <!-- DOTAÇÃO (full width) -->
                    <div class="form-group full-width">
                        <label><i class="fas fa-code-branch"></i> Dotação</label>
                        <input type="text" class="form-control" id="dotacao" name="dotacao" placeholder="Ex: 01.43.10.14.422.0111.1900...">
                    </div>
                    <!-- LINK (full width) -->
                    <div class="form-group full-width">
                        <label><i class="fas fa-link"></i> Link do Processo</label>
                        <input type="url" class="form-control" id="link" name="link" placeholder="https://...">
                    </div>
                </div>

                <button type="submit" class="btn-submit">
                    <i class="fas fa-paper-plane"></i> Registrar e enviar para Planilha
                </button>
            </form>
        </div>
    </div>

    <!-- MENSAGEM DE RETORNO -->
    <div id="liveToast" class="toast-message">
        <i class="fas fa-check-circle"></i> <span id="toastText">Registro enviado com sucesso!</span>
    </div>

    <script>
        (function() {
            "use strict";

            // ==========  COLE AQUI SUA URL DO GOOGLE APPS SCRIPT  ==========
            // !! SUBSTITUA PELA SUA URL APÓS IMPLANTAR O WEB APP !!
            const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyhyMyLqFF8iUt21ynz_jB0fsYPPFAOIk7RWfDqQW9dqGfUDFHNYSAMuDZ-Q6JG5f_EAg/exec";
            // =================================================================

            const form = document.getElementById('emendaForm');
            const toast = document.getElementById('liveToast');
            const toastText = document.getElementById('toastText');

            // Função para exibir notificação
            function showMessage(msg, isError = false) {
                toastText.innerText = msg;
                toast.style.display = 'flex';
                toast.style.background = isError ? '#962020' : '#1e3e4a';
                setTimeout(() => { toast.style.display = 'none'; }, 5000);
            }

            // Envio do formulário
            form.addEventListener('submit', function(e) {
                e.preventDefault();

                // Coleta os dados exatamente com os cabeçalhos da planilha
                const formData = {
                    'DATA e hora': document.getElementById('dataHora').value.trim(),
                    'PROC. ADM.': document.getElementById('procAdm').value.trim(),
                    'PROC. ADM.CAMARA': document.getElementById('procCamara').value.trim(),
                    'EMENDA PARLAMENTAR': document.getElementById('emenda').value.trim(),
                    'VALOR(R$)': 'R$ ' + document.getElementById('valor').value.trim().replace(/^R\$ ?/i, ''),
                    'Responsável': document.getElementById('responsavel').value.trim().toUpperCase(),
                    'ENTIDADE': document.getElementById('entidade').value.trim().toUpperCase(),
                    'DESCRIÇÃO': document.getElementById('descricao').value.trim(),
                    'Dotação': document.getElementById('dotacao').value.trim(),
                    'Link': document.getElementById('link').value.trim()
                };

                // Validação simples
                if (!formData['DATA e hora'] || !formData['VALOR(R$)'] || !formData['Responsável'] || !formData['ENTIDADE']) {
                    showMessage('Preencha os campos obrigatórios (*)', true);
                    return;
                }

                // Mostra status de envio
                showMessage('Enviando para o Google Planilhas...', false);
                
                // Envia para o Google Apps Script (Web App)
                fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors', // necessário para evitar erros CORS em Web App anônimo
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: new URLSearchParams(formData).toString()
                })
                .then(() => {
                    showMessage('✔ Registro enviado! (verifique na planilha em instantes)');
                    // Limpa o formulário após envio bem-sucedido
                    form.reset();
                })
                .catch(error => {
                    console.error('Erro no fetch:', error);
                    showMessage('Erro na conexão com a planilha. Verifique a URL do Script.', true);
                });
            });
        })();
    </script>

    <!-- Nota: a planilha precisa estar publicada como Web App - veja as instruções no código do Google Apps Script -->
    <div style="margin-top: 1.5rem; font-size: 0.75rem; text-align: center; color: #568696;">
        <i class="fas fa-shield-alt"></i> Dados não serão salvos até que você configure o Google Apps Script com a URL correta. 
        Consulte o arquivo <strong>Code.gs</strong> incluso.
    </div>
</body>
</html>
